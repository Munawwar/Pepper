var Pepper=(()=>{var S=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var B=Object.prototype.hasOwnProperty;var V=(e,t)=>{for(var r in t)S(e,r,{get:t[r],enumerable:!0})},q=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of x(t))!B.call(e,n)&&n!==r&&S(e,n,{get:()=>t[n],enumerable:!(a=W(t,n))||a.enumerable});return e};var F=e=>q(S({},"__esModule",{value:!0}),e);var U={};V(U,{default:()=>Q});var d=Array.from;function M(e,t){return Array.prototype.forEach.call(e,t)}function y(e){return Object.keys(e).filter(t=>t!=="constructor")}function E(e){return d(arguments).forEach((t,r)=>{r&&y(t).forEach(a=>{e[a]=t[a]})}),e}function j(e){e=e||{};for(var t=1;t<arguments.length;t+=1){var r=arguments[t];if(!(!r||typeof f!="object"))for(var a=a(r),n=1;n<a.length;n+=1){var i=a[n],f=r[i];e[i]=typeof f=="object"&&f!==null?j(e[i],f):f}}return e}function I(e){var t=document.createElement("template");t.innerHTML=e;for(var r=t.content,a=r.querySelectorAll("script"),n=0;n<a.length;n+=1)r.removeChild(a[n]);return r}function T(e){if(e.tagName.indexOf("-")>0)return!0;var t=e.getAttribute("is");return t&&t.indexOf("-")>0}function P(e,t){for(var r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT),a=r.nextNode();a;){if(T(a)){a=r.nextSibling();continue}t(a),a=r.nextNode()}}function R(e,t){M(t.attributes,r=>{e.attributes.getNamedItem(r.name)||t.attributes.removeNamedItem(r.name)}),M(e.attributes,r=>{t.getAttribute(r.name)!==r.value&&t.setAttribute(r.name,r.value)})}function z(e){return e.outerHTML.slice(0,-(e.innerHTML.length+e.tagName.length+4))+"/>"}function b(e,t){var r=t.get(e);return r||(r=e.nodeType+":"+(e.nodeType===1?T(e)?z(e):e.outerHTML:e.nodeValue),t.set(e,r)),r}function C(e,t,r,a){if(!e.length){t.forEach(s=>r.removeChild(s));return}var n=new WeakMap,i={};e.forEach(s=>{var o=b(s,n);i[o]=i[o]||{u:[],n2l:new Map,l2n:new Map},i[o].u.push(s)});var f=0,u={};if(t.forEach(s=>{var o=b(s,n),m=i[o],h=!1;if(m){var l=m.u.shift();l&&(m.n2l.set(l,s),m.l2n.set(s,l),h=!0,f++)}!h&&s.nodeType===1&&(u[s.nodeName]=u[s.nodeName]||[],u[s.nodeName].push(s))}),f===e.length&&t.length>e.length)for(var c=t.length-1;c>=0;c--){var A=t[c],L=b(A,n);(!i[L]||!i[L].l2n.has(A))&&(r.removeChild(A),t.splice(c,1))}var k=d(r.childNodes).indexOf(a)+1,p=new Set;e.forEach((s,o)=>{var m=b(s,n),h=i[m].n2l.get(s),l=r.childNodes[k+o];if(h){p.add(h),l!==h&&r.insertBefore(h,l);return}var O=s.nodeName;if(s.nodeType!==1||!u[O]||!u[O].length){p.add(s),r.insertBefore(s,l);return}var H=s,v=u[s.nodeName].shift();p.add(v),l!==v&&r.insertBefore(v,l),R(H,v),T(H)||C(d(H.childNodes),d(v.childNodes),v)}),t.forEach(s=>{p.has(s)||r.removeChild(s)})}function _(e){var t=this;t._data=typeof e.data=="object"&&e.data||{};var r=e.mount,a=e.hydrate;delete e.data,delete e.mount,delete e.hydrate,E(t,e),Object.defineProperty(t,"data",{configurable:!1,set(n){t._data=n,t.render()},get(){return t._data}}),a?t.hydrate():r&&t.mount()}var g=new WeakMap;function G(e,t,r,a){if(a){var n=g.get(e)||{};n[r]=a,g.set(e,n),e.addEventListener(r,t)}}function J(e,t){Object.keys(g.get(e)||{}).forEach(function(r){e.removeEventListener(r,t)}),g.delete(e)}function K(e,t){var r=t.currentTarget,a=(g.get(r)||{})[t.type];a&&a.call(e,t)}_.Store=function(t){var r=this;r._data=t||{},r._subscribers=[],Object.defineProperty(this,"data",{configurable:!1,set(a){if(typeof a=="object"){var n=[].concat(y(a).filter(i=>r._data[i]!==a[i]),y(r._data).filter(i=>!(i in a)));r._data=a,r.notify(n)}},get(){return r._data}})};_.Store.prototype={data:{},notify(e){var t=e.reduce((r,a)=>(r[a]=1,r),{});this._subscribers.forEach(r=>{var a=r.props.filter(n=>t[n]);a.length&&r.callback.call(r.context,a)})},subscribe(e,t,r){if(!(typeof t!="function"||!Array.isArray(e))){var a=this,n=a._subscribers.some(i=>i.callback===t&&(r===void 0||r===i.context));n||a._subscribers.push({props:e,callback:t,context:r})}},unsubscribe(e,t){this._subscribers=this._subscribers.filter(r=>!(r.callback===e&&(t===void 0||t===r.context)))},assign(e){var t=this;if(typeof e=="object"){var r=y(e).filter(a=>t._data[a]!==e[a]);E(t._data,e),t.notify(r)}}};_.prototype={_data:null,target:null,connect:{},getHtml(){return""},assign(){var e=d(arguments);E.apply(null,[this.data].concat(e)),this.render()},merge(e){j(this.data,e),this.render()},handleEvent(e){K(this,e)},toString:function(){var t=this,r=t.connect,a=r&&r.store&&r.store._data||{},n=(r&&r.props||[]).reduce((f,u)=>(f[u]=a[u],f),{}),i=E(n,t.data);return t.getHtml(i)},render(){var e=this,t=e.el,r=document.activeElement.id;t&&P(t,u=>{var c=u.getAttribute("ref");c&&e[c]instanceof Node&&delete e[c],g.has(u)&&J(u,e)});var a=I(e.toString()),n=d(a.childNodes);if(t){var i=d(t.childNodes);C(n,i,t)}if(r){var f=document.getElementById(r);f&&f.focus()}e.domHydrate()},domHydrate(){var e=this;e.el.pepperInstance=e,P(e.el,t=>{var r=t.getAttribute("ref");r&&(e[r]=t),M(t.attributes,a=>{if(a.name.startsWith("on-")){var n=a.name.replace(/on-/,"");G(t,e,n,e[a.value])}})})},mount(e=!1){var t=this,r=t.connect;r&&r.store&&r.store.subscribe(r.props,t.render,t);var a=t.target;return typeof a=="string"&&(a=document.querySelector(a)),t.el&&a===t.el?!1:a?(t.el=a,e?t.domHydrate():t.render(),!0):!1},hydrate(e){arguments.length>0&&e&&typeof e=="object"&&(this._data=e),this.mount(!0)},unmount(){var e=this,t=e.connect;t&&t.store&&t.store.unsubscribe(e.render,e),e.el.replaceChildren()}};var Q=_;return F(U);})();
//# sourceMappingURL=pepper.min.js.map
